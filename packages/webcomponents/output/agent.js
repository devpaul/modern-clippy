!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";(function(t){const n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0;e.a=n}).call(this,n(4))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2);customElements.define("modern-agent",o.Agent),e.default=o.Agent},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,l)}s((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=n(9),i=n(3),a=n(5),l=n(6);function s(t){return null!=t?`${t}px`:null}e.Agent=class extends HTMLElement{constructor(){super(),this._mute=!1;const t=this.attachShadow({mode:"open"});t.appendChild(l.loadStyles()),t.appendChild(l.loadTemplate());const e=this._speech.querySelector("slot");e&&e.addEventListener("slotchange",t=>{this._onSlotChange(t)})}static get observedAttributes(){return["bundle","mute","dialog"]}get actions(){return Object.keys(this._config.animations)}get current(){return this._control&&this._control.action}attributeChangedCallback(t,e,n){switch(t){case"bundle":this.load(n);break;case"mute":this._mute="true"===n;break;case"dialog":const e=a.isRelativePosition(n)?a.getPosition(n,this._config.frameSize):a.parsePosition(n);this._setDialogPosition(e)}}load(t){return o(this,void 0,void 0,function*(){if("string"==typeof t){console.log(`loading ${t} bundle`);const e=yield fetch(t);t=yield e.json()}for(t.license&&(console.log("==========================================================="),console.log("BUNDLE LICENSE"),console.log(t.license),console.log("===========================================================")),this._config=t;this._overlays.firstChild;)this._overlays.removeChild(this._overlays.firstChild);for(let e=t.overlayCount;e>0;e--)this._createOverlay();this._overlays.style.height=s(t.frameSize.height),this._overlays.style.width=s(t.frameSize.width),this._resetDialogPosition(),this._soundBoard=yield i.default.load(t.soundPack),this.play("Show"),this.dispatchEvent(new CustomEvent("loaded"))})}play(t){const e=this._config.animations[t];if(!e)throw new Error(`Action ${t} does not exist`);this._control&&this._control.stopImmediately(),this.dispatchEvent(new CustomEvent("actionStart",{detail:{action:t}}));let n=0;return this._control=Object.assign({action:t},r.animator(e,e=>{const{images:o=[]}=e;this._setFrames(o);for(let t=o.length;t<this._config.overlayCount;t++)this._hideFrame(t);!this._mute&&e.sound&&this._soundBoard.play(String(e.sound)),this.dispatchEvent(new CustomEvent("frame",{detail:{action:t,frame:e,time:n}})),n+=e.duration})),this._control.done.finally(()=>{this.dispatchEvent(new CustomEvent("actionEnd",{detail:{action:t}})),this._control=void 0}),this._control}playIdle(){const t=this.actions.filter(t=>"Idle"===t.substr(0,4));this.play(t[Math.floor(Math.random()*t.length)])}stop(){this._control&&this._control.stop()}stopImmediately(){this._control&&this._control.stopImmediately()}get _overlays(){return this.shadowRoot.querySelector("#overlays")}get _speech(){return this.shadowRoot.querySelector("#speech")}_createOverlay(){const{characterMap:t,frameSize:{width:e,height:n}}=this._config,o=document.createElement("div");o.style.width=s(e),o.style.height=s(n),o.style.backgroundImage=`url(${t})`,o.style.display="none",this._overlays.appendChild(o)}_hideFrame(t=0){const e=this._overlays.children[t];e&&(e.style.display="none")}_onSlotChange(t){const e=t.target;this._speech.style.visibility=e.assignedElements().length?"visible":"hidden"}_resetDialogPosition(){const t=this.getAttribute("dialog");if(t)try{const e=a.isRelativePosition(t)?a.getPosition(t,this._config.frameSize):a.parsePosition(t);return void this._setDialogPosition(e)}catch(t){}this._setDialogPosition(a.getPosition("left",this._config.frameSize))}_setDialogPosition(t){const e=this._speech;e.classList.remove("left","right","top","bottom"),e.classList.add(t.placement),e.style.top=s(t.top),e.style.bottom=s(t.bottom),e.style.left=s(t.left),e.style.right=s(t.right)}_setFrame(t,e,n=0){const{width:o,height:r}=this._config.frameSize,i=this._overlays.children[n];if(t%o==0&&e%r==0||console.warn(`frame ${t},${e} is not a multiple of frame size ${o},${r}`),!i)throw new Error(`Missing overlay ${n}`);i.style.display="block",i.style.backgroundPositionX=s(-t),i.style.backgroundPositionY=s(-e),i.style.position="absolute",i.style.top="0",i.style.left="0"}_setFrames(t){if(t)for(let e=0;e<t.length;e++){const[n,o]=t[e];this._setFrame(n,o,e)}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"SoundBoard",function(){return s}),n.d(e,"CoreAudio",function(){return c});var o=n(0),r=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,l)}s((o=o.apply(t,e||[])).next())})};const i=o.a.AudioContext||o.a.webkitAudioContext,a=new Map([["mp3","audio/mpeg"],["ogg","audio/ogg"]]),l=document.createElement("audio");class s{constructor(t,e){this.context=t,this.effects=e}play(t){const e=this.effects[t];if(e){"suspended"===this.context.state&&this.context.resume();const t=this.context.createBufferSource();t.buffer=e,t.connect(this.context.destination),t.start()}else console.warn(`Soundboard missing effect for ${t}`)}}class c{constructor(t=new i){this.context=t}get suspended(){return"suspended"===this.context.state}resume(){this.context.resume()}load(t){return r(this,void 0,void 0,function*(){const e={};return Object.keys(t).forEach(n=>r(this,void 0,void 0,function*(){const o=t[n];this.canPlay(n)&&(console.log("loading "+n),yield this.loadSoundPack(e,o))})),new s(this.context,e)})}loadSound(t){return r(this,void 0,void 0,function*(){const e=yield fetch(t),n=yield e.arrayBuffer();return this.context.decodeAudioData(n)})}canPlay(t){const e=a.get(t)||t;return l.canPlayType(e)}loadSoundPack(t,e){return Promise.all(Object.keys(e).map(n=>r(this,void 0,void 0,function*(){if(!t[n])try{t[n]=yield this.loadSound(e[n])}catch(t){console.warn(`failed to load audio ${n}`)}})))}}e.default=new c},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function o(t){return null==t||"number"==typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.isRelativePosition=function(t){return"left"===t||"right"===t||"top"===t||"bottom"===t},e.parsePosition=function(t){if("string"==typeof t&&(t=JSON.parse(t)),function(t){return t&&"object"==typeof t&&"string"==typeof t.placement&&o(t.top)&&o(t.bottom)&&o(t.right)&&o(t.left)}(t))return t;throw new Error("Invalid position")},e.getPosition=function(t,e){switch(t){case"right":return function(t){return{placement:"right",top:0,right:Math.floor(-.75*t.width)}}(e);case"bottom":return function(t){return{placement:"bottom",bottom:Math.floor(-1.1*t.height)}}(e);case"top":return function(t){return{placement:"top",top:Math.floor(-.75*t.height)}}(e);default:return function(t){return{placement:"left",top:0,left:Math.floor(-.75*t.width)}}(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(7).default,r=n(8);function i(t,e){if(null==t)throw new Error(e);return t}e.loadTemplate=function(){const t=document.createElement("template");t.innerHTML=r;const e=t.content.cloneNode(!0);return i(e.querySelector("#overlays"),"missing overlay container"),i(e.querySelector("#speech"),"missing speech container"),i(e.querySelector("slot"),"missing slot"),e},e.loadStyles=function(){const t=document.createElement("style");return t.textContent=o,t}},function(t,e,n){"use strict";n.r(e),e.default=':host {\n\t--bg-color: #FFC;\n\t--border-color: black;\n\t--text-color: #333;\n\t--triangle-height: 13px;\n\t--triangle-base: 26px;\n\t--triangle-placement: 40px;\n\t--triangle-vertical-placement: 10px;\n\t--triangle-border: 1px;\n\t--speech-min-width: 40px;\n\t--speech-min-height: 40px;\n}\n\n.root {\n\tposition: relative;\n}\n\n#overlays {\n\tposition: relative;\n}\n\n#overlays > * {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n}\n\n/* =========================================================================================================\n * SPEECH BUBBLE\n*/\n\n#speech {\n\tvisibility: hidden;\n\tposition: absolute;\n\tdisplay: block;\n\tz-index: 1000;\n\tmin-width: var(--speech-min-width);\n\tmin-height: var(--speech-min-height)\n}\n\n.bubble {\n\tposition: relative;\n\tpadding: 15px;\n\tmargin: 1em 0 3em;\n\tborder: var(--triangle-border) solid var(--border-color);\n\tcolor: var(--text-color);\n\tbackground: var(--bg-color);\n\tborder-radius: 10px;\n}\n\n/* TOP DIALOG (bottom triangle) */\n\n/* outer triangle border */\n.top.bubble:before {\n\tcontent: "";\n\tposition: absolute;\n\tbottom: calc(-1 * (var(--triangle-height) + var(--triangle-border)));\n\tleft: var(--triangle-placement);\n\tborder-width: calc(var(--triangle-height) + var(--triangle-border)) calc(var(--triangle-border) + var(--triangle-base) / 2) 0;\n\tborder-style: solid;\n\tborder-color: var(--border-color) transparent;\n}\n\n/* creates the smaller triangle */\n.top.bubble:after {\n\tcontent: "";\n\tposition: absolute;\n\tbottom: calc(-1 * var(--triangle-height));\n\tleft: calc(var(--triangle-placement) + var(--triangle-border));\n\tborder-width: var(--triangle-height) calc(var(--triangle-base) / 2) 0;\n\tborder-style: solid;\n\tborder-color: var(--bg-color) transparent;\n}\n\n/* RIGHT DIALOG (left triangle) */\n\n.right.bubble:before {\n\tcontent: "";\n\tposition: absolute;\n\ttop: var(--triangle-vertical-placement);\n\tleft: calc(-1 * (var(--triangle-height) + var(--triangle-border)));\n\tborder-width: calc(var(--triangle-border) + var(--triangle-base) / 2) calc(var(--triangle-height) + var(--triangle-border)) calc(var(--triangle-border) + var(--triangle-base) / 2) 0;\n\tborder-style: solid;\n\tborder-color: transparent var(--border-color) transparent;\n}\n\n.right.bubble:after {\n\tcontent: "";\n\tposition: absolute;\n\ttop: calc(var(--triangle-vertical-placement) + var(--triangle-border));\n\tleft: calc(-1 * var(--triangle-height));\n\tborder-width: 50px 145px 50px 0;\n\tborder-width: calc(var(--triangle-base) / 2) var(--triangle-height) calc(var(--triangle-base) / 2) 0;\n\tborder-style: solid;\n\tborder-color: transparent var(--bg-color) transparent;\n}\n\n/* LEFT DIALOG (right triangle) */\n\n.left.bubble:before {\n\tcontent: "";\n\tposition: absolute;\n\ttop: var(--triangle-vertical-placement);\n\tright: calc(-1 * (var(--triangle-height) + var(--triangle-border)));\n\tborder-width: calc(var(--triangle-border) + var(--triangle-base) / 2) 0 calc(var(--triangle-border) + var(--triangle-base) / 2) calc(var(--triangle-height) + var(--triangle-border));\n\tborder-style: solid;\n\tborder-color: transparent var(--border-color) transparent;\n}\n\n.left.bubble:after {\n\tcontent: "";\n\tposition: absolute;\n\ttop: calc(var(--triangle-vertical-placement) + var(--triangle-border));\n\tright: calc(-1 * var(--triangle-height));\n\tborder-width: 50px 145px 50px 0;\n\tborder-width: calc(var(--triangle-base) / 2) 0 calc(var(--triangle-base) / 2) var(--triangle-height);\n\tborder-style: solid;\n\tborder-color: transparent var(--bg-color) transparent;\n}\n\n/* BOTTOM DIALOG (top triangle) */\n\n/* outer triangle border */\n.bottom.bubble:before {\n\tcontent: "";\n\tposition: absolute;\n\ttop: calc(-1 * (var(--triangle-height) + var(--triangle-border)));\n\tleft: var(--triangle-placement);\n\tborder-width: 0 calc(var(--triangle-border) + var(--triangle-base) / 2) calc(var(--triangle-height) + var(--triangle-border));\n\tborder-style: solid;\n\tborder-color: var(--border-color) transparent;\n}\n\n/* creates the smaller triangle */\n.bottom.bubble:after {\n\tcontent: "";\n\tposition: absolute;\n\ttop: calc(-1 * var(--triangle-height));\n\tleft: calc(var(--triangle-placement) + var(--triangle-border));\n\tborder-width: 0 calc(var(--triangle-base) / 2) var(--triangle-height);\n\tborder-style: solid;\n\tborder-color: var(--bg-color) transparent;\n}\n'},function(t,e){t.exports='<div class=root> <div id=speech class="bubble left"> <slot name=""> </slot> </div> <div id=overlays> </div> </div> '},function(t,e,n){"use strict";function o(t){return new Promise(e=>{setTimeout(e,t)})}n.r(e),n.d(e,"stepper",function(){return a}),n.d(e,"animator",function(){return l});var r=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,l)}s((o=o.apply(t,e||[])).next())})};function i(t){let e=100*Math.random();for(const n of t)if((e-=n.weight)<=0)return n.frameIndex}function*a(t){let e=0,n=t.frames,o=!1;for(;e<n.length;){let t=n[e];(o=!!(yield t)||o)&&t.exitBranch?e=t.exitBranch:t.branching?e=i(t.branching.branches)||e+1:e++}}function l(t,e){const n=a(t);let i,l=!1,s=!1;const c=Promise.race([(()=>r(this,void 0,void 0,function*(){for(let{done:t,value:r}=n.next(l);!s&&!t;({done:t,value:r}=n.next(l)))e(r),yield o(r.duration)}))(),new Promise(t=>{i=t})]);return{done:c,stop:()=>(l=!1,c),stopImmediately(){s=!0,i()}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL2NvbW1vbi9vdXRwdXQvZXNtL3V0aWwvZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWdlbnQudHMiLCJ3ZWJwYWNrOi8vLy4uL2NvbW1vbi9vdXRwdXQvZXNtL2NvcmVBdWRpby5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9hZ2VudC5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FnZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4uL2NvbW1vbi9vdXRwdXQvZXNtL3V0aWwvc2xlZXAuanMiLCJ3ZWJwYWNrOi8vLy4uL2NvbW1vbi9vdXRwdXQvZXNtL2FuaW1hdG9yLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2xvYmFsIiwiZ2xvYmFsT2JqZWN0Iiwic2VsZiIsIndpbmRvdyIsIl9fd2VicGFja19leHBvcnRzX18iLCJhZ2VudF8xIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJBZ2VudCIsImRlZmF1bHQiLCJhbmltYXRvcl8xIiwiY29yZUF1ZGlvXzEiLCJkaWFsb2dfMSIsInRlbXBsYXRlXzEiLCJjc3NQeCIsInBvcyIsIkhUTUxFbGVtZW50IiwiW29iamVjdCBPYmplY3RdIiwic3VwZXIiLCJ0aGlzIiwiX211dGUiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJhcHBlbmRDaGlsZCIsImxvYWRTdHlsZXMiLCJsb2FkVGVtcGxhdGUiLCJzcGVlY2hTbG90IiwiX3NwZWVjaCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJfb25TbG90Q2hhbmdlIiwib2JzZXJ2ZWRBdHRyaWJ1dGVzIiwiYWN0aW9ucyIsImtleXMiLCJfY29uZmlnIiwiYW5pbWF0aW9ucyIsImN1cnJlbnQiLCJfY29udHJvbCIsImFjdGlvbiIsIl9vbGRWYWx1ZSIsIm5ld1ZhbHVlIiwibG9hZCIsInBvc2l0aW9uIiwiaXNSZWxhdGl2ZVBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJmcmFtZVNpemUiLCJwYXJzZVBvc2l0aW9uIiwiX3NldERpYWxvZ1Bvc2l0aW9uIiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImZldGNoIiwianNvbiIsImxpY2Vuc2UiLCJfb3ZlcmxheXMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJvdmVybGF5Q291bnQiLCJfY3JlYXRlT3ZlcmxheSIsInN0eWxlIiwiaGVpZ2h0Iiwid2lkdGgiLCJfcmVzZXREaWFsb2dQb3NpdGlvbiIsIl9zb3VuZEJvYXJkIiwic291bmRQYWNrIiwicGxheSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImFuaW1hdGlvbiIsIkVycm9yIiwic3RvcEltbWVkaWF0ZWx5IiwiZGV0YWlsIiwidGltZSIsImFzc2lnbiIsImFuaW1hdG9yIiwiZnJhbWUiLCJpbWFnZXMiLCJfc2V0RnJhbWVzIiwibGVuZ3RoIiwiX2hpZGVGcmFtZSIsInNvdW5kIiwiU3RyaW5nIiwiZHVyYXRpb24iLCJkb25lIiwiZmluYWxseSIsInVuZGVmaW5lZCIsImlkbGVBY3Rpb25zIiwiZmlsdGVyIiwic3Vic3RyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3RvcCIsInNoYWRvd1Jvb3QiLCJjaGFyYWN0ZXJNYXAiLCJvdmVybGF5IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYmFja2dyb3VuZEltYWdlIiwiZGlzcGxheSIsIm5vZGUiLCJjaGlsZHJlbiIsInNsb3QiLCJ0YXJnZXQiLCJ2aXNpYmlsaXR5IiwiYXNzaWduZWRFbGVtZW50cyIsImF0dHJpYnV0ZVZhbHVlIiwiZ2V0QXR0cmlidXRlIiwiZSIsInNwZWVjaCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInBsYWNlbWVudCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIngiLCJ5Iiwid2FybiIsImJhY2tncm91bmRQb3NpdGlvblgiLCJiYWNrZ3JvdW5kUG9zaXRpb25ZIiwiX3NldEZyYW1lIiwiU291bmRCb2FyZCIsIkNvcmVBdWRpbyIsIl91dGlsX2dsb2JhbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwidGhlbiIsImFwcGx5IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwibWltZU1hcCIsIk1hcCIsImF1ZGlvVGFnIiwiY29udGV4dCIsImVmZmVjdHMiLCJidWZmZXIiLCJzdGF0ZSIsInJlc3VtZSIsInNvdXJjZSIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInN0YXJ0Iiwic3VzcGVuZGVkIiwiZm9yRWFjaCIsInR5cGUiLCJwYWNrIiwiY2FuUGxheSIsImxvYWRTb3VuZFBhY2siLCJzcmMiLCJkYXRhIiwiYXJyYXlCdWZmZXIiLCJkZWNvZGVBdWRpb0RhdGEiLCJmb3JtYXQiLCJtaW1ldHlwZSIsImNhblBsYXlUeXBlIiwiYWxsIiwibWFwIiwiaWQiLCJsb2FkU291bmQiLCJnIiwiRnVuY3Rpb24iLCJpc09wdGlvbmFsTnVtYmVyIiwiSlNPTiIsInBhcnNlIiwiaXNEaWFsb2dQb3NpdGlvbiIsImFnZW50RGltZW5zaW9ucyIsImNhbGN1bGF0ZVJpZ2h0IiwiY2FsY3VsYXRlQm90dG9tIiwiY2FsY3VsYXRlVG9wIiwiY2FsY3VsYXRlTGVmdCIsImFnZW50U3R5bGUiLCJ0ZW1wbGF0ZVN0cmluZyIsInRocm93SWZOdWxsIiwibWVzc2FnZSIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwicm9vdCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsInNsZWVwIiwibWlsbGlzZWNvbmRzIiwic2V0VGltZW91dCIsInN0ZXBwZXIiLCJwaWNrUmFuZG9tIiwiYnJhbmNoZXMiLCJwaWNrIiwiYnJhbmNoIiwid2VpZ2h0IiwiZnJhbWVJbmRleCIsIm9mZnNldCIsImZyYW1lcyIsImV4aXQiLCJleGl0QnJhbmNoIiwiYnJhbmNoaW5nIiwiZnJhbWVDYWxsYmFjayIsIml0ZXJhdG9yIiwiY2FsbEltbWVkaWF0ZSIsImltbWVkaWF0ZSIsInJhY2UiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixF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QTRGLEdBQXFCdUksRUFBQXpFLEtBQUFxRSxJQUM5R0csRUFBQXRJLFNBQ3NCdUgsRUFBS3ZILEVBQUFPLFlBSDNCLEdBTUEsSUFBQWtELFFBQUFsRixJQUNBaUssRUFBQWpLLE1BR0EsT0FDQWlDLE9BQ0FTLEtBQUEsS0FDQWtILEdBQUEsRUFDQTNILEdBRUFwRSxrQkFDQXFNLEdBQUEsRUFDQUQiLCJmaWxlIjoiYWdlbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJjb25zdCBnbG9iYWxPYmplY3QgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXHJcbiAgICAvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcclxuICAgIC8vIEhvd2V2ZXIsIHRoaXMgY2F1c2VzIENTUCB2aW9sYXRpb25zIGluIENocm9tZSBhcHBzLlxyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbn0pKCk7XHJcbmV4cG9ydCBkZWZhdWx0IGdsb2JhbE9iamVjdDtcclxuIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tICcuL2FnZW50JztcblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtb2Rlcm4tYWdlbnQnLCBBZ2VudCk7XG5cbmV4cG9ydCBkZWZhdWx0IEFnZW50O1xuIiwiaW1wb3J0IHsgQWdlbnRDb25maWd1cmF0aW9uLCBGcmFtZUltYWdlcyB9IGZyb20gJ21vZGVybi1jbGlwcHknO1xuaW1wb3J0IHsgYW5pbWF0b3IgfSBmcm9tICcuLi8uLi9jb21tb24vb3V0cHV0L2VzbS9hbmltYXRvcic7XG5pbXBvcnQgYXVkaW8sIHsgU291bmRCb2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi9vdXRwdXQvZXNtL2NvcmVBdWRpbyc7XG5pbXBvcnQgeyBpc1JlbGF0aXZlUG9zaXRpb24sIHBhcnNlUG9zaXRpb24sIGdldFBvc2l0aW9uLCBEaWFsb2dQb3NpdGlvbiB9IGZyb20gJy4vZGlhbG9nJztcbmltcG9ydCB7IGxvYWRTdHlsZXMsIGxvYWRUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUnO1xuXG5mdW5jdGlvbiBjc3NQeChwb3M/OiBudW1iZXIpIHtcblx0cmV0dXJuIHBvcyAhPSBudWxsID8gYCR7cG9zfXB4YCA6IG51bGw7XG59XG5cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0cHJpdmF0ZSBfY29uZmlnITogQWdlbnRDb25maWd1cmF0aW9uO1xuXHRwcml2YXRlIF9jb250cm9sPzogUmV0dXJuVHlwZTx0eXBlb2YgYW5pbWF0b3I+ICYgeyBhY3Rpb246IHN0cmluZyB9O1xuXHRwcml2YXRlIF9tdXRlID0gZmFsc2U7XG5cdHByaXZhdGUgX3NvdW5kQm9hcmQhOiBTb3VuZEJvYXJkO1xuXG5cdHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuXHRcdHJldHVybiBbJ2J1bmRsZScsICdtdXRlJywgJ2RpYWxvZyddO1xuXHR9XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblxuXHRcdGNvbnN0IHNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXHRcdHNoYWRvdy5hcHBlbmRDaGlsZChsb2FkU3R5bGVzKCkpO1xuXHRcdHNoYWRvdy5hcHBlbmRDaGlsZChsb2FkVGVtcGxhdGUoKSk7XG5cblx0XHRjb25zdCBzcGVlY2hTbG90ID0gdGhpcy5fc3BlZWNoLnF1ZXJ5U2VsZWN0b3IoJ3Nsb3QnKTtcblx0XHRzcGVlY2hTbG90ICYmXG5cdFx0XHRzcGVlY2hTbG90LmFkZEV2ZW50TGlzdGVuZXIoJ3Nsb3RjaGFuZ2UnLCAoZXZlbnQpID0+IHtcblx0XHRcdFx0dGhpcy5fb25TbG90Q2hhbmdlKGV2ZW50KTtcblx0XHRcdH0pO1xuXHR9XG5cblx0Z2V0IGFjdGlvbnMoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9jb25maWcuYW5pbWF0aW9ucyk7XG5cdH1cblxuXHRnZXQgY3VycmVudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLl9jb250cm9sICYmIHRoaXMuX2NvbnRyb2wuYWN0aW9uO1xuXHR9XG5cblx0YXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWU6IHN0cmluZywgX29sZFZhbHVlOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpIHtcblx0XHRzd2l0Y2ggKG5hbWUpIHtcblx0XHRcdGNhc2UgJ2J1bmRsZSc6XG5cdFx0XHRcdHRoaXMubG9hZChuZXdWYWx1ZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbXV0ZSc6XG5cdFx0XHRcdHRoaXMuX211dGUgPSBuZXdWYWx1ZSA9PT0gJ3RydWUnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RpYWxvZyc6XG5cdFx0XHRcdGNvbnN0IHBvc2l0aW9uID0gaXNSZWxhdGl2ZVBvc2l0aW9uKG5ld1ZhbHVlKVxuXHRcdFx0XHRcdD8gZ2V0UG9zaXRpb24obmV3VmFsdWUsIHRoaXMuX2NvbmZpZy5mcmFtZVNpemUpXG5cdFx0XHRcdFx0OiBwYXJzZVBvc2l0aW9uKG5ld1ZhbHVlKTtcblx0XHRcdFx0dGhpcy5fc2V0RGlhbG9nUG9zaXRpb24ocG9zaXRpb24pO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWQoY29uZmlnOiBBZ2VudENvbmZpZ3VyYXRpb24gfCBzdHJpbmcpIHtcblx0XHRpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGNvbnNvbGUubG9nKGBsb2FkaW5nICR7Y29uZmlnfSBidW5kbGVgKTtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGNvbmZpZyk7XG5cdFx0XHRjb25maWcgPSAoYXdhaXQgcmVzdWx0Lmpzb24oKSkgYXMgQWdlbnRDb25maWd1cmF0aW9uO1xuXHRcdH1cblx0XHRpZiAoY29uZmlnLmxpY2Vuc2UpIHtcblx0XHRcdGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuXHRcdFx0Y29uc29sZS5sb2coJ0JVTkRMRSBMSUNFTlNFJyk7XG5cdFx0XHRjb25zb2xlLmxvZyhjb25maWcubGljZW5zZSk7XG5cdFx0XHRjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcblx0XHR9XG5cdFx0dGhpcy5fY29uZmlnID0gY29uZmlnO1xuXHRcdHdoaWxlICh0aGlzLl9vdmVybGF5cy5maXJzdENoaWxkKSB7XG5cdFx0XHR0aGlzLl9vdmVybGF5cy5yZW1vdmVDaGlsZCh0aGlzLl9vdmVybGF5cy5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgaSA9IGNvbmZpZy5vdmVybGF5Q291bnQ7IGkgPiAwOyBpLS0pIHtcblx0XHRcdHRoaXMuX2NyZWF0ZU92ZXJsYXkoKTtcblx0XHR9XG5cdFx0dGhpcy5fb3ZlcmxheXMuc3R5bGUuaGVpZ2h0ID0gY3NzUHgoY29uZmlnLmZyYW1lU2l6ZS5oZWlnaHQpO1xuXHRcdHRoaXMuX292ZXJsYXlzLnN0eWxlLndpZHRoID0gY3NzUHgoY29uZmlnLmZyYW1lU2l6ZS53aWR0aCk7XG5cdFx0dGhpcy5fcmVzZXREaWFsb2dQb3NpdGlvbigpO1xuXHRcdHRoaXMuX3NvdW5kQm9hcmQgPSBhd2FpdCBhdWRpby5sb2FkKGNvbmZpZy5zb3VuZFBhY2spO1xuXHRcdHRoaXMucGxheSgnU2hvdycpO1xuXHRcdHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xvYWRlZCcpKTtcblx0fVxuXG5cdHBsYXkoYWN0aW9uOiBzdHJpbmcpIHtcblx0XHRjb25zdCBhbmltYXRpb24gPSB0aGlzLl9jb25maWcuYW5pbWF0aW9uc1thY3Rpb25dO1xuXHRcdGlmICghYW5pbWF0aW9uKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEFjdGlvbiAke2FjdGlvbn0gZG9lcyBub3QgZXhpc3RgKTtcblx0XHR9XG5cdFx0dGhpcy5fY29udHJvbCAmJiB0aGlzLl9jb250cm9sLnN0b3BJbW1lZGlhdGVseSgpO1xuXHRcdHRoaXMuZGlzcGF0Y2hFdmVudChcblx0XHRcdG5ldyBDdXN0b21FdmVudCgnYWN0aW9uU3RhcnQnLCB7XG5cdFx0XHRcdGRldGFpbDogeyBhY3Rpb24gfVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdGxldCB0aW1lID0gMDtcblx0XHR0aGlzLl9jb250cm9sID0ge1xuXHRcdFx0YWN0aW9uLFxuXHRcdFx0Li4uYW5pbWF0b3IoYW5pbWF0aW9uLCAoZnJhbWUpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBpbWFnZXMgPSBbXSB9ID0gZnJhbWU7XG5cdFx0XHRcdHRoaXMuX3NldEZyYW1lcyhpbWFnZXMpO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gaW1hZ2VzLmxlbmd0aDsgaSA8IHRoaXMuX2NvbmZpZy5vdmVybGF5Q291bnQ7IGkrKykge1xuXHRcdFx0XHRcdHRoaXMuX2hpZGVGcmFtZShpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIXRoaXMuX211dGUgJiYgZnJhbWUuc291bmQpIHtcblx0XHRcdFx0XHR0aGlzLl9zb3VuZEJvYXJkLnBsYXkoU3RyaW5nKGZyYW1lLnNvdW5kKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5kaXNwYXRjaEV2ZW50KFxuXHRcdFx0XHRcdG5ldyBDdXN0b21FdmVudCgnZnJhbWUnLCB7XG5cdFx0XHRcdFx0XHRkZXRhaWw6IHsgYWN0aW9uLCBmcmFtZSwgdGltZSB9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHRcdFx0dGltZSArPSBmcmFtZS5kdXJhdGlvbjtcblx0XHRcdH0pXG5cdFx0fTtcblx0XHR0aGlzLl9jb250cm9sLmRvbmUuZmluYWxseSgoKSA9PiB7XG5cdFx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoXG5cdFx0XHRcdG5ldyBDdXN0b21FdmVudCgnYWN0aW9uRW5kJywge1xuXHRcdFx0XHRcdGRldGFpbDogeyBhY3Rpb24gfVxuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuX2NvbnRyb2wgPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRyb2w7XG5cdH1cblxuXHRwbGF5SWRsZSgpIHtcblx0XHRjb25zdCBpZGxlQWN0aW9ucyA9IHRoaXMuYWN0aW9ucy5maWx0ZXIoKGFjdGlvbikgPT4gYWN0aW9uLnN1YnN0cigwLCA0KSA9PT0gJ0lkbGUnKTtcblx0XHR0aGlzLnBsYXkoaWRsZUFjdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaWRsZUFjdGlvbnMubGVuZ3RoKV0pO1xuXHR9XG5cblx0c3RvcCgpIHtcblx0XHR0aGlzLl9jb250cm9sICYmIHRoaXMuX2NvbnRyb2wuc3RvcCgpO1xuXHR9XG5cblx0c3RvcEltbWVkaWF0ZWx5KCkge1xuXHRcdHRoaXMuX2NvbnRyb2wgJiYgdGhpcy5fY29udHJvbC5zdG9wSW1tZWRpYXRlbHkoKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0IF9vdmVybGF5cygpOiBIVE1MRWxlbWVudCB7XG5cdFx0cmV0dXJuIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcignI292ZXJsYXlzJykgYXMgSFRNTEVsZW1lbnQ7XG5cdH1cblxuXHRwcml2YXRlIGdldCBfc3BlZWNoKCk6IEhUTUxFbGVtZW50IHtcblx0XHRyZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKCcjc3BlZWNoJykgYXMgSFRNTEVsZW1lbnQ7XG5cdH1cblxuXHRwcml2YXRlIF9jcmVhdGVPdmVybGF5KCkge1xuXHRcdGNvbnN0IHtcblx0XHRcdGNoYXJhY3Rlck1hcCxcblx0XHRcdGZyYW1lU2l6ZTogeyB3aWR0aCwgaGVpZ2h0IH1cblx0XHR9ID0gdGhpcy5fY29uZmlnO1xuXHRcdGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRvdmVybGF5LnN0eWxlLndpZHRoID0gY3NzUHgod2lkdGgpO1xuXHRcdG92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gY3NzUHgoaGVpZ2h0KTtcblx0XHRvdmVybGF5LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtjaGFyYWN0ZXJNYXB9KWA7XG5cdFx0b3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdHRoaXMuX292ZXJsYXlzLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXHR9XG5cblx0cHJpdmF0ZSBfaGlkZUZyYW1lKG92ZXJsYXk6IG51bWJlciA9IDApIHtcblx0XHRjb25zdCBub2RlID0gdGhpcy5fb3ZlcmxheXMuY2hpbGRyZW5bb3ZlcmxheV0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0bm9kZSAmJiAobm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTtcblx0fVxuXG5cdHByaXZhdGUgX29uU2xvdENoYW5nZShldmVudDogRXZlbnQpIHtcblx0XHRjb25zdCBzbG90ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxTbG90RWxlbWVudDtcblx0XHR0aGlzLl9zcGVlY2guc3R5bGUudmlzaWJpbGl0eSA9IHNsb3QuYXNzaWduZWRFbGVtZW50cygpLmxlbmd0aCA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nO1xuXHR9XG5cblx0cHJpdmF0ZSBfcmVzZXREaWFsb2dQb3NpdGlvbigpIHtcblx0XHRjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkaWFsb2cnKTtcblx0XHRpZiAoYXR0cmlidXRlVmFsdWUpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHBvc2l0aW9uID0gaXNSZWxhdGl2ZVBvc2l0aW9uKGF0dHJpYnV0ZVZhbHVlKVxuXHRcdFx0XHRcdD8gZ2V0UG9zaXRpb24oYXR0cmlidXRlVmFsdWUsIHRoaXMuX2NvbmZpZy5mcmFtZVNpemUpXG5cdFx0XHRcdFx0OiBwYXJzZVBvc2l0aW9uKGF0dHJpYnV0ZVZhbHVlKTtcblx0XHRcdFx0dGhpcy5fc2V0RGlhbG9nUG9zaXRpb24ocG9zaXRpb24pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdH1cblx0XHR0aGlzLl9zZXREaWFsb2dQb3NpdGlvbihnZXRQb3NpdGlvbignbGVmdCcsIHRoaXMuX2NvbmZpZy5mcmFtZVNpemUpKTtcblx0fVxuXG5cdHByaXZhdGUgX3NldERpYWxvZ1Bvc2l0aW9uKHBvc2l0aW9uOiBEaWFsb2dQb3NpdGlvbikge1xuXHRcdGNvbnN0IHNwZWVjaCA9IHRoaXMuX3NwZWVjaDtcblx0XHRzcGVlY2guY2xhc3NMaXN0LnJlbW92ZSgnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJyk7XG5cdFx0c3BlZWNoLmNsYXNzTGlzdC5hZGQocG9zaXRpb24ucGxhY2VtZW50KTtcblx0XHRzcGVlY2guc3R5bGUudG9wID0gY3NzUHgocG9zaXRpb24udG9wKTtcblx0XHRzcGVlY2guc3R5bGUuYm90dG9tID0gY3NzUHgocG9zaXRpb24uYm90dG9tKTtcblx0XHRzcGVlY2guc3R5bGUubGVmdCA9IGNzc1B4KHBvc2l0aW9uLmxlZnQpO1xuXHRcdHNwZWVjaC5zdHlsZS5yaWdodCA9IGNzc1B4KHBvc2l0aW9uLnJpZ2h0KTtcblx0fVxuXG5cdHByaXZhdGUgX3NldEZyYW1lKHg6IG51bWJlciwgeTogbnVtYmVyLCBvdmVybGF5OiBudW1iZXIgPSAwKSB7XG5cdFx0Y29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLl9jb25maWcuZnJhbWVTaXplO1xuXHRcdGNvbnN0IG5vZGUgPSB0aGlzLl9vdmVybGF5cy5jaGlsZHJlbltvdmVybGF5XSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoeCAlIHdpZHRoICE9PSAwIHx8IHkgJSBoZWlnaHQgIT09IDApIHtcblx0XHRcdGNvbnNvbGUud2FybihgZnJhbWUgJHt4fSwke3l9IGlzIG5vdCBhIG11bHRpcGxlIG9mIGZyYW1lIHNpemUgJHt3aWR0aH0sJHtoZWlnaHR9YCk7XG5cdFx0fVxuXHRcdGlmICghbm9kZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIG92ZXJsYXkgJHtvdmVybGF5fWApO1xuXHRcdH1cblxuXHRcdG5vZGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0bm9kZS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25YID0gY3NzUHgoLXgpO1xuXHRcdG5vZGUuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWSA9IGNzc1B4KC15KTtcblx0XHRub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRub2RlLnN0eWxlLnRvcCA9ICcwJztcblx0XHRub2RlLnN0eWxlLmxlZnQgPSAnMCc7XG5cdH1cblxuXHRwcml2YXRlIF9zZXRGcmFtZXMoaW1hZ2VzOiBGcmFtZUltYWdlcykge1xuXHRcdGlmIChpbWFnZXMpIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGNvbnN0IFt4LCB5XSA9IGltYWdlc1tpXTtcblx0XHRcdFx0dGhpcy5fc2V0RnJhbWUoeCwgeSwgaSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5pbXBvcnQgZ2xvYmFsIGZyb20gJy4vdXRpbC9nbG9iYWwnO1xyXG5jb25zdCBBdWRpb0NvbnRleHQgPSBnbG9iYWwuQXVkaW9Db250ZXh0IHx8IGdsb2JhbC53ZWJraXRBdWRpb0NvbnRleHQ7XHJcbmNvbnN0IG1pbWVNYXAgPSBuZXcgTWFwKFtbJ21wMycsICdhdWRpby9tcGVnJ10sIFsnb2dnJywgJ2F1ZGlvL29nZyddXSk7XHJcbmNvbnN0IGF1ZGlvVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcclxuZXhwb3J0IGNsYXNzIFNvdW5kQm9hcmQge1xyXG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgZWZmZWN0cykge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5lZmZlY3RzID0gZWZmZWN0cztcclxuICAgIH1cclxuICAgIHBsYXkobmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuZWZmZWN0c1tuYW1lXTtcclxuICAgICAgICBpZiAoYnVmZmVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xyXG4gICAgICAgICAgICBzb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgICAgICBzb3VyY2UuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xyXG4gICAgICAgICAgICBzb3VyY2Uuc3RhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgU291bmRib2FyZCBtaXNzaW5nIGVmZmVjdCBmb3IgJHtuYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgQ29yZUF1ZGlvIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCkpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG4gICAgZ2V0IHN1c3BlbmRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJztcclxuICAgIH1cclxuICAgIHJlc3VtZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQucmVzdW1lKCk7XHJcbiAgICB9XHJcbiAgICBsb2FkKGNvbmZpZykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdHMgPSB7fTtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKCh0eXBlKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWNrID0gY29uZmlnW3R5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuUGxheSh0eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nICcgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmxvYWRTb3VuZFBhY2soZWZmZWN0cywgcGFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTb3VuZEJvYXJkKHRoaXMuY29udGV4dCwgZWZmZWN0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBsb2FkU291bmQoc3JjKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIGZldGNoKHNyYyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHlpZWxkIGRhdGEuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYnVmZmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhblBsYXkoZm9ybWF0KSB7XHJcbiAgICAgICAgY29uc3QgbWltZXR5cGUgPSBtaW1lTWFwLmdldChmb3JtYXQpIHx8IGZvcm1hdDtcclxuICAgICAgICByZXR1cm4gYXVkaW9UYWcuY2FuUGxheVR5cGUobWltZXR5cGUpO1xyXG4gICAgfVxyXG4gICAgbG9hZFNvdW5kUGFjayhlZmZlY3RzLCBwYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKHBhY2spLm1hcCgoaWQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgaWYgKCFlZmZlY3RzW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RzW2lkXSA9IHlpZWxkIHRoaXMubG9hZFNvdW5kKHBhY2tbaWRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBmYWlsZWQgdG8gbG9hZCBhdWRpbyAke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQ29yZUF1ZGlvKCk7XHJcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsImltcG9ydCB7IEZyYW1lU2l6ZSB9IGZyb20gJ21vZGVybi1jbGlwcHknO1xuXG5leHBvcnQgdHlwZSBSZWxhdGl2ZVBvc2l0aW9uID0gJ2xlZnQnIHwgJ3JpZ2h0JyB8ICd0b3AnIHwgJ2JvdHRvbSc7XG5leHBvcnQgaW50ZXJmYWNlIERpYWxvZ1Bvc2l0aW9uIHtcblx0cGxhY2VtZW50OiBSZWxhdGl2ZVBvc2l0aW9uO1xuXHRib3R0b20/OiBudW1iZXI7XG5cdGxlZnQ/OiBudW1iZXI7XG5cdHJpZ2h0PzogbnVtYmVyO1xuXHR0b3A/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlbGF0aXZlUG9zaXRpb24odmFsdWU6IHN0cmluZyk6IHZhbHVlIGlzIFJlbGF0aXZlUG9zaXRpb24ge1xuXHRyZXR1cm4gdmFsdWUgPT09ICdsZWZ0JyB8fCB2YWx1ZSA9PT0gJ3JpZ2h0JyB8fCB2YWx1ZSA9PT0gJ3RvcCcgfHwgdmFsdWUgPT09ICdib3R0b20nO1xufVxuXG5mdW5jdGlvbiBpc09wdGlvbmFsTnVtYmVyKHZhbHVlOiBhbnkpIHtcblx0cmV0dXJuIHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNEaWFsb2dQb3NpdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgRGlhbG9nUG9zaXRpb24ge1xuXHRyZXR1cm4gKFxuXHRcdHZhbHVlICYmXG5cdFx0dHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuXHRcdHR5cGVvZiB2YWx1ZS5wbGFjZW1lbnQgPT09ICdzdHJpbmcnICYmXG5cdFx0aXNPcHRpb25hbE51bWJlcih2YWx1ZS50b3ApICYmXG5cdFx0aXNPcHRpb25hbE51bWJlcih2YWx1ZS5ib3R0b20pICYmXG5cdFx0aXNPcHRpb25hbE51bWJlcih2YWx1ZS5yaWdodCkgJiZcblx0XHRpc09wdGlvbmFsTnVtYmVyKHZhbHVlLmxlZnQpXG5cdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBvc2l0aW9uKHZhbHVlOiBhbnkpOiBEaWFsb2dQb3NpdGlvbiB7XG5cdGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0dmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKTtcblx0fVxuXHRpZiAoaXNEaWFsb2dQb3NpdGlvbih2YWx1ZSkpIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBvc2l0aW9uJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb3NpdGlvbihwb3M6IFJlbGF0aXZlUG9zaXRpb24sIGFnZW50RGltZW5zaW9uczogRnJhbWVTaXplKTogRGlhbG9nUG9zaXRpb24ge1xuXHRzd2l0Y2ggKHBvcykge1xuXHRcdGNhc2UgJ3JpZ2h0Jzpcblx0XHRcdHJldHVybiBjYWxjdWxhdGVSaWdodChhZ2VudERpbWVuc2lvbnMpO1xuXHRcdGNhc2UgJ2JvdHRvbSc6XG5cdFx0XHRyZXR1cm4gY2FsY3VsYXRlQm90dG9tKGFnZW50RGltZW5zaW9ucyk7XG5cdFx0Y2FzZSAndG9wJzpcblx0XHRcdHJldHVybiBjYWxjdWxhdGVUb3AoYWdlbnREaW1lbnNpb25zKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGNhbGN1bGF0ZUxlZnQoYWdlbnREaW1lbnNpb25zKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVMZWZ0KGFnZW50RGltZW5zaW9uczogRnJhbWVTaXplKTogRGlhbG9nUG9zaXRpb24ge1xuXHRyZXR1cm4geyBwbGFjZW1lbnQ6ICdsZWZ0JywgdG9wOiAwLCBsZWZ0OiBNYXRoLmZsb29yKC0wLjc1ICogYWdlbnREaW1lbnNpb25zLndpZHRoKSB9O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVSaWdodChhZ2VudERpbWVuc2lvbnM6IEZyYW1lU2l6ZSk6IERpYWxvZ1Bvc2l0aW9uIHtcblx0cmV0dXJuIHsgcGxhY2VtZW50OiAncmlnaHQnLCB0b3A6IDAsIHJpZ2h0OiBNYXRoLmZsb29yKC0wLjc1ICogYWdlbnREaW1lbnNpb25zLndpZHRoKSB9O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVUb3AoYWdlbnREaW1lbnNpb25zOiBGcmFtZVNpemUpOiBEaWFsb2dQb3NpdGlvbiB7XG5cdHJldHVybiB7IHBsYWNlbWVudDogJ3RvcCcsIHRvcDogTWF0aC5mbG9vcigtMC43NSAqIGFnZW50RGltZW5zaW9ucy5oZWlnaHQpIH07XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUJvdHRvbShhZ2VudERpbWVuc2lvbnM6IEZyYW1lU2l6ZSk6IERpYWxvZ1Bvc2l0aW9uIHtcblx0cmV0dXJuIHsgcGxhY2VtZW50OiAnYm90dG9tJywgYm90dG9tOiBNYXRoLmZsb29yKC0xLjEgKiBhZ2VudERpbWVuc2lvbnMuaGVpZ2h0KSB9O1xufVxuIiwiY29uc3QgYWdlbnRTdHlsZTogc3RyaW5nID0gcmVxdWlyZSgnLi9hZ2VudC5jc3MnKS5kZWZhdWx0O1xuY29uc3QgdGVtcGxhdGVTdHJpbmc6IHN0cmluZyA9IHJlcXVpcmUoJy4vYWdlbnQuaHRtbCcpO1xuXG5mdW5jdGlvbiB0aHJvd0lmTnVsbDxUID0gYW55Pih2YWx1ZTogVCB8IG51bGwgfCB1bmRlZmluZWQsIG1lc3NhZ2U6IHN0cmluZyk6IFQge1xuXHRpZiAodmFsdWUgPT0gbnVsbCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkVGVtcGxhdGUoKSB7XG5cdGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0dGVtcGxhdGUuaW5uZXJIVE1MID0gdGVtcGxhdGVTdHJpbmc7XG5cdGNvbnN0IHJvb3QgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblxuXHR0aHJvd0lmTnVsbChyb290LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5cycpLCAnbWlzc2luZyBvdmVybGF5IGNvbnRhaW5lcicpO1xuXHR0aHJvd0lmTnVsbChyb290LnF1ZXJ5U2VsZWN0b3IoJyNzcGVlY2gnKSwgJ21pc3Npbmcgc3BlZWNoIGNvbnRhaW5lcicpO1xuXHR0aHJvd0lmTnVsbChyb290LnF1ZXJ5U2VsZWN0b3IoJ3Nsb3QnKSwgJ21pc3Npbmcgc2xvdCcpO1xuXHRyZXR1cm4gcm9vdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTdHlsZXMoKSB7XG5cdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0c3R5bGUudGV4dENvbnRlbnQgPSBhZ2VudFN0eWxlO1xuXHRyZXR1cm4gc3R5bGU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBcIjpob3N0IHtcXG5cXHQtLWJnLWNvbG9yOiAjRkZDO1xcblxcdC0tYm9yZGVyLWNvbG9yOiBibGFjaztcXG5cXHQtLXRleHQtY29sb3I6ICMzMzM7XFxuXFx0LS10cmlhbmdsZS1oZWlnaHQ6IDEzcHg7XFxuXFx0LS10cmlhbmdsZS1iYXNlOiAyNnB4O1xcblxcdC0tdHJpYW5nbGUtcGxhY2VtZW50OiA0MHB4O1xcblxcdC0tdHJpYW5nbGUtdmVydGljYWwtcGxhY2VtZW50OiAxMHB4O1xcblxcdC0tdHJpYW5nbGUtYm9yZGVyOiAxcHg7XFxuXFx0LS1zcGVlY2gtbWluLXdpZHRoOiA0MHB4O1xcblxcdC0tc3BlZWNoLW1pbi1oZWlnaHQ6IDQwcHg7XFxufVxcblxcbi5yb290IHtcXG5cXHRwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbiNvdmVybGF5cyB7XFxuXFx0cG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4jb3ZlcmxheXMgPiAqIHtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiAwO1xcblxcdGxlZnQ6IDA7XFxufVxcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIFNQRUVDSCBCVUJCTEVcXG4qL1xcblxcbiNzcGVlY2gge1xcblxcdHZpc2liaWxpdHk6IGhpZGRlbjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0ZGlzcGxheTogYmxvY2s7XFxuXFx0ei1pbmRleDogMTAwMDtcXG5cXHRtaW4td2lkdGg6IHZhcigtLXNwZWVjaC1taW4td2lkdGgpO1xcblxcdG1pbi1oZWlnaHQ6IHZhcigtLXNwZWVjaC1taW4taGVpZ2h0KVxcbn1cXG5cXG4uYnViYmxlIHtcXG5cXHRwb3NpdGlvbjogcmVsYXRpdmU7XFxuXFx0cGFkZGluZzogMTVweDtcXG5cXHRtYXJnaW46IDFlbSAwIDNlbTtcXG5cXHRib3JkZXI6IHZhcigtLXRyaWFuZ2xlLWJvcmRlcikgc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcXG5cXHRjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7XFxuXFx0YmFja2dyb3VuZDogdmFyKC0tYmctY29sb3IpO1xcblxcdGJvcmRlci1yYWRpdXM6IDEwcHg7XFxufVxcblxcbi8qIFRPUCBESUFMT0cgKGJvdHRvbSB0cmlhbmdsZSkgKi9cXG5cXG4vKiBvdXRlciB0cmlhbmdsZSBib3JkZXIgKi9cXG4udG9wLmJ1YmJsZTpiZWZvcmUge1xcblxcdGNvbnRlbnQ6IFxcXCJcXFwiO1xcblxcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG5cXHRib3R0b206IGNhbGMoLTEgKiAodmFyKC0tdHJpYW5nbGUtaGVpZ2h0KSArIHZhcigtLXRyaWFuZ2xlLWJvcmRlcikpKTtcXG5cXHRsZWZ0OiB2YXIoLS10cmlhbmdsZS1wbGFjZW1lbnQpO1xcblxcdGJvcmRlci13aWR0aDogY2FsYyh2YXIoLS10cmlhbmdsZS1oZWlnaHQpICsgdmFyKC0tdHJpYW5nbGUtYm9yZGVyKSkgY2FsYyh2YXIoLS10cmlhbmdsZS1ib3JkZXIpICsgdmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSAwO1xcblxcdGJvcmRlci1zdHlsZTogc29saWQ7XFxuXFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS1ib3JkZXItY29sb3IpIHRyYW5zcGFyZW50O1xcbn1cXG5cXG4vKiBjcmVhdGVzIHRoZSBzbWFsbGVyIHRyaWFuZ2xlICovXFxuLnRvcC5idWJibGU6YWZ0ZXIge1xcblxcdGNvbnRlbnQ6IFxcXCJcXFwiO1xcblxcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG5cXHRib3R0b206IGNhbGMoLTEgKiB2YXIoLS10cmlhbmdsZS1oZWlnaHQpKTtcXG5cXHRsZWZ0OiBjYWxjKHZhcigtLXRyaWFuZ2xlLXBsYWNlbWVudCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKTtcXG5cXHRib3JkZXItd2lkdGg6IHZhcigtLXRyaWFuZ2xlLWhlaWdodCkgY2FsYyh2YXIoLS10cmlhbmdsZS1iYXNlKSAvIDIpIDA7XFxuXFx0Ym9yZGVyLXN0eWxlOiBzb2xpZDtcXG5cXHRib3JkZXItY29sb3I6IHZhcigtLWJnLWNvbG9yKSB0cmFuc3BhcmVudDtcXG59XFxuXFxuLyogUklHSFQgRElBTE9HIChsZWZ0IHRyaWFuZ2xlKSAqL1xcblxcbi5yaWdodC5idWJibGU6YmVmb3JlIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiB2YXIoLS10cmlhbmdsZS12ZXJ0aWNhbC1wbGFjZW1lbnQpO1xcblxcdGxlZnQ6IGNhbGMoLTEgKiAodmFyKC0tdHJpYW5nbGUtaGVpZ2h0KSArIHZhcigtLXRyaWFuZ2xlLWJvcmRlcikpKTtcXG5cXHRib3JkZXItd2lkdGg6IGNhbGModmFyKC0tdHJpYW5nbGUtYm9yZGVyKSArIHZhcigtLXRyaWFuZ2xlLWJhc2UpIC8gMikgY2FsYyh2YXIoLS10cmlhbmdsZS1oZWlnaHQpICsgdmFyKC0tdHJpYW5nbGUtYm9yZGVyKSkgY2FsYyh2YXIoLS10cmlhbmdsZS1ib3JkZXIpICsgdmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSAwO1xcblxcdGJvcmRlci1zdHlsZTogc29saWQ7XFxuXFx0Ym9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB2YXIoLS1ib3JkZXItY29sb3IpIHRyYW5zcGFyZW50O1xcbn1cXG5cXG4ucmlnaHQuYnViYmxlOmFmdGVyIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiBjYWxjKHZhcigtLXRyaWFuZ2xlLXZlcnRpY2FsLXBsYWNlbWVudCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKTtcXG5cXHRsZWZ0OiBjYWxjKC0xICogdmFyKC0tdHJpYW5nbGUtaGVpZ2h0KSk7XFxuXFx0Ym9yZGVyLXdpZHRoOiA1MHB4IDE0NXB4IDUwcHggMDtcXG5cXHRib3JkZXItd2lkdGg6IGNhbGModmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSB2YXIoLS10cmlhbmdsZS1oZWlnaHQpIGNhbGModmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSAwO1xcblxcdGJvcmRlci1zdHlsZTogc29saWQ7XFxuXFx0Ym9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB2YXIoLS1iZy1jb2xvcikgdHJhbnNwYXJlbnQ7XFxufVxcblxcbi8qIExFRlQgRElBTE9HIChyaWdodCB0cmlhbmdsZSkgKi9cXG5cXG4ubGVmdC5idWJibGU6YmVmb3JlIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiB2YXIoLS10cmlhbmdsZS12ZXJ0aWNhbC1wbGFjZW1lbnQpO1xcblxcdHJpZ2h0OiBjYWxjKC0xICogKHZhcigtLXRyaWFuZ2xlLWhlaWdodCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKSk7XFxuXFx0Ym9yZGVyLXdpZHRoOiBjYWxjKHZhcigtLXRyaWFuZ2xlLWJvcmRlcikgKyB2YXIoLS10cmlhbmdsZS1iYXNlKSAvIDIpIDAgY2FsYyh2YXIoLS10cmlhbmdsZS1ib3JkZXIpICsgdmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSBjYWxjKHZhcigtLXRyaWFuZ2xlLWhlaWdodCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKTtcXG5cXHRib3JkZXItc3R5bGU6IHNvbGlkO1xcblxcdGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdmFyKC0tYm9yZGVyLWNvbG9yKSB0cmFuc3BhcmVudDtcXG59XFxuXFxuLmxlZnQuYnViYmxlOmFmdGVyIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiBjYWxjKHZhcigtLXRyaWFuZ2xlLXZlcnRpY2FsLXBsYWNlbWVudCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKTtcXG5cXHRyaWdodDogY2FsYygtMSAqIHZhcigtLXRyaWFuZ2xlLWhlaWdodCkpO1xcblxcdGJvcmRlci13aWR0aDogNTBweCAxNDVweCA1MHB4IDA7XFxuXFx0Ym9yZGVyLXdpZHRoOiBjYWxjKHZhcigtLXRyaWFuZ2xlLWJhc2UpIC8gMikgMCBjYWxjKHZhcigtLXRyaWFuZ2xlLWJhc2UpIC8gMikgdmFyKC0tdHJpYW5nbGUtaGVpZ2h0KTtcXG5cXHRib3JkZXItc3R5bGU6IHNvbGlkO1xcblxcdGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdmFyKC0tYmctY29sb3IpIHRyYW5zcGFyZW50O1xcbn1cXG5cXG4vKiBCT1RUT00gRElBTE9HICh0b3AgdHJpYW5nbGUpICovXFxuXFxuLyogb3V0ZXIgdHJpYW5nbGUgYm9yZGVyICovXFxuLmJvdHRvbS5idWJibGU6YmVmb3JlIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiBjYWxjKC0xICogKHZhcigtLXRyaWFuZ2xlLWhlaWdodCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKSk7XFxuXFx0bGVmdDogdmFyKC0tdHJpYW5nbGUtcGxhY2VtZW50KTtcXG5cXHRib3JkZXItd2lkdGg6IDAgY2FsYyh2YXIoLS10cmlhbmdsZS1ib3JkZXIpICsgdmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSBjYWxjKHZhcigtLXRyaWFuZ2xlLWhlaWdodCkgKyB2YXIoLS10cmlhbmdsZS1ib3JkZXIpKTtcXG5cXHRib3JkZXItc3R5bGU6IHNvbGlkO1xcblxcdGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWNvbG9yKSB0cmFuc3BhcmVudDtcXG59XFxuXFxuLyogY3JlYXRlcyB0aGUgc21hbGxlciB0cmlhbmdsZSAqL1xcbi5ib3R0b20uYnViYmxlOmFmdGVyIHtcXG5cXHRjb250ZW50OiBcXFwiXFxcIjtcXG5cXHRwb3NpdGlvbjogYWJzb2x1dGU7XFxuXFx0dG9wOiBjYWxjKC0xICogdmFyKC0tdHJpYW5nbGUtaGVpZ2h0KSk7XFxuXFx0bGVmdDogY2FsYyh2YXIoLS10cmlhbmdsZS1wbGFjZW1lbnQpICsgdmFyKC0tdHJpYW5nbGUtYm9yZGVyKSk7XFxuXFx0Ym9yZGVyLXdpZHRoOiAwIGNhbGModmFyKC0tdHJpYW5nbGUtYmFzZSkgLyAyKSB2YXIoLS10cmlhbmdsZS1oZWlnaHQpO1xcblxcdGJvcmRlci1zdHlsZTogc29saWQ7XFxuXFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS1iZy1jb2xvcikgdHJhbnNwYXJlbnQ7XFxufVxcblwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9cm9vdD4gPGRpdiBpZD1zcGVlY2ggY2xhc3M9XFxcImJ1YmJsZSBsZWZ0XFxcIj4gPHNsb3QgbmFtZT1cXFwiXFxcIj4gPC9zbG90PiA8L2Rpdj4gPGRpdiBpZD1vdmVybGF5cz4gPC9kaXY+IDwvZGl2PiBcIjsiLCJleHBvcnQgZnVuY3Rpb24gc2xlZXAobWlsbGlzZWNvbmRzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XHJcbiAgICB9KTtcclxufVxyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gJy4vdXRpbC9zbGVlcCc7XHJcbmZ1bmN0aW9uIHBpY2tSYW5kb20oYnJhbmNoZXMpIHtcclxuICAgIGxldCBwaWNrID0gTWF0aC5yYW5kb20oKSAqIDEwMDtcclxuICAgIGZvciAoY29uc3QgYnJhbmNoIG9mIGJyYW5jaGVzKSB7XHJcbiAgICAgICAgcGljayAtPSBicmFuY2gud2VpZ2h0O1xyXG4gICAgICAgIGlmIChwaWNrIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJyYW5jaC5mcmFtZUluZGV4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24qIHN0ZXBwZXIoYW5pbWF0aW9uKSB7XHJcbiAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgIGxldCBmcmFtZXMgPSBhbmltYXRpb24uZnJhbWVzO1xyXG4gICAgbGV0IGV4aXQgPSBmYWxzZTtcclxuICAgIHdoaWxlIChvZmZzZXQgPCBmcmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IGZyYW1lID0gZnJhbWVzW29mZnNldF07XHJcbiAgICAgICAgZXhpdCA9ICEhKHlpZWxkIGZyYW1lKSB8fCBleGl0O1xyXG4gICAgICAgIGlmIChleGl0ICYmIGZyYW1lLmV4aXRCcmFuY2gpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gZnJhbWUuZXhpdEJyYW5jaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZnJhbWUuYnJhbmNoaW5nKSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IHBpY2tSYW5kb20oZnJhbWUuYnJhbmNoaW5nLmJyYW5jaGVzKSB8fCBvZmZzZXQgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2Zmc2V0Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRvcihhbmltYXRpb24sIGZyYW1lQ2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGl0ZXJhdG9yID0gc3RlcHBlcihhbmltYXRpb24pO1xyXG4gICAgbGV0IGV4aXQgPSBmYWxzZTtcclxuICAgIGxldCBpbW1lZGlhdGUgPSBmYWxzZTtcclxuICAgIGxldCBjYWxsSW1tZWRpYXRlO1xyXG4gICAgY29uc3QgZG9uZSA9IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeyBkb25lLCB2YWx1ZTogZnJhbWUgfSA9IGl0ZXJhdG9yLm5leHQoZXhpdCk7ICFpbW1lZGlhdGUgJiYgIWRvbmU7IHsgZG9uZSwgdmFsdWU6IGZyYW1lIH0gPSBpdGVyYXRvci5uZXh0KGV4aXQpKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFtZUNhbGxiYWNrKGZyYW1lKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHNsZWVwKGZyYW1lLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKSgpLFxyXG4gICAgICAgIG5ldyBQcm9taXNlKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgY2FsbEltbWVkaWF0ZSA9IHJlc3VsdDtcclxuICAgICAgICB9KVxyXG4gICAgXSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRvbmUsXHJcbiAgICAgICAgc3RvcCgpIHtcclxuICAgICAgICAgICAgZXhpdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9uZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0b3BJbW1lZGlhdGVseSgpIHtcclxuICAgICAgICAgICAgaW1tZWRpYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2FsbEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==